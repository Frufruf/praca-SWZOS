@using Microsoft.AspNetCore.Http
@using System.Security.Claims
@model SWZOS.Models.BlackList.BlackListViewModel

@inject IHttpContextAccessor httpContextAccessor
@{
    string name = httpContextAccessor.HttpContext.User.FindFirstValue(ClaimTypes.NameIdentifier);
    string role = httpContextAccessor.HttpContext.User.FindFirstValue(ClaimTypes.Role);
}
<script>
    BlackListUrl = {
        ApproveUrl: "@Url.Action("ApproveBlackListEntry", "BlackList", new { id = "@Model.Id" })",
        RejectUrl: "@Url.Action("RejectBlackListEntry", "BlackList", new { id = "@Model.Id" })",
        DeleteUrl: "@Url.Action("DeleteFromBlackList", "BlackList", new { id = "@Model.Id" })"
    }
</script>
<div class="container">
    <div class="row align-items-center">
        <div class="col-12">
            <div class="form-group">
                <label class="form-label" asp-for="FullName"></label>
                <input class="form-control" type="text" asp-for="FullName" disabled/>
            </div>
            <div class="form-group">
                <label class="form-label" asp-for="Reason">Powód:</label>
                <textarea class="form-control" type="password" asp-for="Reason" disabled></textarea>
            </div>
            <div class="form-group">
                <label class="form-label" asp-for="StatusName">Status:</label>
                <input class="form-control" type="text" asp-for="StatusName" disabled/>
            </div>
        </div>
        @if (name != null && role == "Admin")
        {
            <div class="col-4">
                <button class="btn btn-primary" id="approveBlackListEntry" disabled="@if(Model.StatusId != 1) {<text>disabled</text>}">Zatwierdź</button>
            </div>
            <div class="col-4">
                <button class="btn btn-primary" id="rejectBlackListEntry" disabled="@if(Model.StatusId != 1) {<text>disabled</text>}">Odrzuć</button>
            </div>
            <div class="col-4">
                <button class="btn btn-primary" id="deleteBlackListEntry" disabled="@if(Model.StatusId == 1) {<text>disabled</text>}">Usuń</button>
            </div> 
        }
    </div>
</div>